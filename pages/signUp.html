<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sign Up | julienishimwe | portfolio</title>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css"
    />
    <link rel="shortcut icon" type="image" href="../img/title-logo.jpg" />
  </head>
  <body class="user-login">
    <header>
      <span>
        <a href="../index.html">
          <img src="../img/logo.png" width="100px" height="70px" alt="" /> </a
      ></span>
      <span><a href="../index.html">HOME</a></span>
    </header>
    <div class="login-title">
      <h3>Sign Up</h3>
    </div>
    <div class="signup-cont">
      <form action="" id="signup">
        <input
          type="text"
          id="fullname"
          class="form-control"
          placeholder="Full name."
          required
        />
        <br />
        <input
          type="text"
          id="email"
          class="form-control"
          placeholder="Your Email."
          required
        />
        <br />
        <input
          type="password"
          id="pwd"
          class="form-control"
          placeholder="Password."
          required
        />
        <i class="fa fa-eye" id="eye"></i><br />
        <input type="submit" class="submit" value="submit" />
      </form>
    </div>
    <div class="user-login-footer">
      <div class="orgi-footer">
        <p>julish &copy copyright 2022</p>
      </div>
    </div>
    <script>
      var pwd = document.getElementById("pwd");
      var eye = document.getElementById("eye");

      eye.addEventListener("click", togglePass);

      function togglePass() {
        eye.classList.toggle("active");

        pwd.type == "password" ? (pwd.type = "text") : (pwd.type = "password");
      }
    </script>
    <script>
      document.getElementById("signup").addEventListener("submit", (e) => {
        e.preventDefault();
        const fullname = document.getElementById("fullname").value;
        const email = document.getElementById("email").value;
        const password = document.getElementById("pwd").value;

        var myHeaders = new Headers();
        myHeaders.append("Content-Type", "application/json");

        var raw = JSON.stringify({
          full_name: fullname,
          email: email,
          password: password,
        });

        var requestOptions = {
          method: "POST",
          headers: myHeaders,
          body: raw,
          redirect: "follow",
        };

        // fetch("https://my-brand-project.herokuapp.com/api/v1/users/signUp", requestOptions)
        fetch("http://localhost:4500/api/v1/users/signUp", requestOptions)
          .then((response) => response.text())
          .then((result) => {
            console.log(result);
            alert("signup successfully");
          });
        setTimeout(() => {
          location.assign("./blog.html");
          location.assign("../pages/user-login.html");
        }, 3000).catch((error) => {
          console.log("error", error), alert("error");
        });
      });
    </script>
  </body>
</html>
